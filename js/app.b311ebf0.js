(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],d=0,h=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,r=1;r<a.length;r++){var c=a[r];0!==n[c]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},n={app:0},i=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/after-school-client/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Navigation"),a("Classes")],1)},i=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[s("b-navbar-brand",{attrs:{href:""}},[s("img",{attrs:{src:a("f0fc"),width:"30"}}),t._v(" "),s("span",{attrs:{id:"logoTitle"}},[t._v("After School Inc.")])])],1)},r=[],c=(a("cc0e"),a("2877")),l={},u=Object(c["a"])(l,o,r,!1,null,"7d3e95df",null),d=u.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"pricing-section spad"},[t._m(0),a("a",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-cart",modifiers:{"modal-cart":!0}}],attrs:{role:"button",id:"cart"}},[a("b-modal",{attrs:{id:"modal-cart",title:"Shopping Cart","hide-footer":""}},[this.checkOutClicked?a("h2",[t._v("Your order has been submitted")]):a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("td",[t._v("Class")]),a("td",[t._v("Price")]),a("td")]),t._l(t.cart,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.name))]),a("td",[t._v("£"+t._s(e.price))]),a("td",[a("a",{attrs:{role:"button"},on:{click:function(e){return t.remove(s)}}},[a("img",{attrs:{src:"https://upload.wikimedia.org/wikipedia/en/thumb/b/ba/Red_x.svg/1200px-Red_x.svg.png",width:"30"}})])])])})),a("tr",[a("td",[a("strong",{staticStyle:{float:"right"}},[t._v("Total:")])]),a("td",[t._v("£"+t._s(t.total))]),a("td")])],2)]),this.checkOutClicked?a("h4",[t._v(" Thank you for shopping with us 🤩 "),a("hr"),t._v(" Refresh page to make another order 👨‍🏫 ")]):a("form",{attrs:{id:"form"}},[a("b-form-group",{attrs:{label:"Name","label-for":"name-input"}},[a("b-form-input",{attrs:{name:"name",id:"name-input",placeholder:"Enter your full name"},on:{input:function(e){return t.validateData()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("b-form-group",{attrs:{label:"Telephone","label-for":"telephone-input"}},[a("b-form-input",{attrs:{id:"telephone-input",placeholder:"Enter your phone number"},on:{input:function(e){return t.validateData()}},model:{value:t.telephone,callback:function(e){t.telephone=e},expression:"telephone"}})],1),this.validation&&this.cart.length>0?a("b-button",{staticClass:"mt-3",attrs:{variant:"outline-primary"},on:{click:t.checkout}},[t._v("Check Out")]):a("b-button",{attrs:{variant:"secondary",disabled:""}},[t._v("Enter valid name (letters only) and valid UK telephone number above 😉")])],1)]),t.cart.length>0?a("img",{attrs:{src:"https://icons.iconarchive.com/icons/google/noto-emoji-objects/1024/63007-shopping-cart-icon.png",width:"40"}}):t._e(),t.cart.length>0?a("span",{staticClass:"badge badge-warning",attrs:{id:"cartCount"}},[t._v(" "+t._s(t.cart.length)+" ")]):t._e()],1),a("div",{staticClass:"container"},[a("b-form-input",{attrs:{type:"search",placeholder:"Search","aria-label":"Search",name:"search",id:"searchInput"},on:{change:function(e){return t.displayClasses()}},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),a("div",[a("b-form-select",{staticClass:"mt-3",attrs:{options:t.options,id:"sortBy"},on:{change:function(e){return t.sortClasses()}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),a("div",{staticClass:"container",attrs:{id:"classes"}},[a("div",{staticClass:"row"},t._l(t.displayClasses,(function(e,s){return a("div",{key:s,staticClass:"col-lg-4 col-md-6 col-sm-12"},[a("ul",[a("li",{staticClass:"booking-card",style:{backgroundImage:"url('"+e.imageURL+"')"}},[a("div",{staticClass:"book-container"},[a("div",{staticClass:"content"},[e.availableSpaces>0?a("button",{staticClass:"btn",attrs:{id:s},on:{click:function(e){return t.reduce(s)}}},[t._v(" Book Me ")]):a("button",{staticClass:"btn",attrs:{id:s,disabled:""},on:{click:function(e){return t.reduce(s)}}},[t._v(" Not Available ")])])]),a("div",{staticClass:"informations-container"},[a("h2",{staticClass:"title"},[t._v(t._s(e.topic))]),a("p",{staticClass:"sub-title"},[t._v(t._s(e.user))]),a("p",{staticClass:"price"},[a("svg",{staticClass:"icon",staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M3,6H21V18H3V6M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M7,8A2,2 0 0,1 5,10V14A2,2 0 0,1 7,16H17A2,2 0 0,1 19,14V10A2,2 0 0,1 17,8H7Z"}})]),t._v("£ "+t._s(e.price)+"/month ")]),a("div",{staticClass:"more-information"},[a("p",{staticClass:"disclaimer"},[t._v(" Available Spaces: "+t._s(e.availableSpaces)+" ")]),a("div",{staticClass:"info-and-date-container"},[a("div",{staticClass:"box info"},[a("svg",{staticClass:"icon",staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"}})]),a("p",[t._v(t._s(e.location))])]),a("div",{staticClass:"box date"},[a("svg",{staticClass:"icon",staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z"}})]),a("p",[t._v(t._s(e.date))])])])])])])])])})),0)])],1)])},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"box-area"},[a("li"),a("li"),a("li"),a("li"),a("li"),a("li")])}],f=(a("a623"),a("4de4"),a("4160"),a("caad"),a("c975"),a("d81d"),a("13d5"),a("a434"),a("b0c0"),a("d3b7"),a("ac1f"),a("2532"),a("466d"),a("1276"),a("159b"),a("1157")),v=a.n(f),m={name:"Classes",data:function(){return{classes:[],searchQuery:"",selected:null,options:[{value:null,text:"Sort by"},{value:"1",text:"Topic: A-Z"},{value:"2",text:"Topic Z-A"},{value:"3",text:"Location: A-Z"},{value:"4",text:"Location: Z-A"},{value:"5",text:"Price: Low to High"},{value:"6",text:"Price: High to Low"},{value:"7",text:"Availability: Low to High"},{value:"8",text:"Availability: High to Low"}],cart:[],name:"",telephone:"",validation:!1,checkOutClicked:!1}},created:function(){var t=this;fetch("https://after-school-server.herokuapp.com/collection/lessons").then((function(e){e.json().then((function(e){t.classes=e})).catch((function(t){alert("Error! "+t.message)}))}))},methods:{reduce:function(t){this.classes[t].availableSpaces--,this.cart.push({name:this.classes[t].topic,price:this.classes[t].price,img:this.classes[t].imageURL}),this.classes[t].availableSpaces<1&&(document.getElementById(t).disabled=!0,document.getElementById(t).innerHTML="Not Available")},remove:function(t){var e=this.classes.map((function(t){return t.topic})).indexOf(this.cart[t].name);this.cart.splice(t,1),this.classes[e].availableSpaces++,this.classes[e].availableSpaces>0&&(document.getElementById(e).disabled=!1,document.getElementById(e).innerHTML="Book Me")},sortClasses:function(){return 1==this.selected?this.classes.sort((function(t,e){return t.topic.localeCompare(e.topic)})):2==this.selected?this.classes.sort((function(t,e){return e.topic.localeCompare(t.topic)})):3==this.selected?this.classes.sort((function(t,e){return t.location.localeCompare(e.location)})):4==this.selected?this.classes.sort((function(t,e){return e.location.localeCompare(t.location)})):5==this.selected?this.classes.sort((function(t,e){return t.price-e.price})):6==this.selected?this.classes.sort((function(t,e){return e.price-t.price})):7==this.selected?this.classes.sort((function(t,e){return t.availableSpaces-e.availableSpaces})):8==this.selected?this.classes.sort((function(t,e){return e.availableSpaces-t.availableSpaces})):void 0},showModal:function(){var t=this.$refs.modal.$el;v()(t).modal("show")},validateData:function(){var t=/^[a-zA-Z\s]*$/,e=/^(((\+44\s?\d{4}|\(?0\d{4}\)?)\s?\d{3}\s?\d{3})|((\+44\s?\d{3}|\(?0\d{3}\)?)\s?\d{3}\s?\d{4})|((\+44\s?\d{2}|\(?0\d{2}\)?)\s?\d{4}\s?\d{4}))(\s?(\d{4}|\d{3}))?$/;this.name.match(t)&&""!=this.name&&this.telephone.match(e)&&""!=this.telephone?this.validation=!0:this.validation=!1},checkout:function(){var t=this;this.checkOutClicked=!0;var e={name:this.name,telephone:this.telephone,lessons:[],total:0};this.cart.forEach((function(a){e.total=e.total+a.price,e.lessons.push({name:a.name,price:a.price}),t.classes.forEach((function(t){if(a.name==t.topic){var e={availableSpaces:t.availableSpaces};fetch("https://after-school-server.herokuapp.com/collection/lessons/".concat(t._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){return t.json()})).then((function(t){console.log("Success:",t)}))}}))})),fetch("https://after-school-server.herokuapp.com/collection/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){return t.json()})).then((function(t){console.log("Success:",t)})),this.cart=[]}},computed:{displayClasses:function(){var t=this;return this.searchQuery?this.classes.filter((function(e){return t.searchQuery.split(" ").every((function(t){return e.topic.toLowerCase().includes(t)}))})):this.classes},total:function(){return this.cart.reduce((function(t,e){return t+e.price}),0)}}},b=m,g=(a("8b6a"),Object(c["a"])(b,h,p,!1,null,"7ddca1b3",null)),C=g.exports,y={components:{Navigation:d,Classes:C},watch:{$route:{immediate:!0,handler:function(t){document.title=t.meta.title||"After School Classes"}}},data:function(){return{}}},_=y,x=Object(c["a"])(_,n,i,!1,null,null,null),k=x.exports,w=a("8c4f");s["default"].use(w["a"]);var S=[],A=new w["a"]({routes:S}),H=A,O=a("5f5b");a("f9e3"),a("2dd8"),a("6418");s["default"].use(O["a"]),s["default"].config.productionTip=!1,new s["default"]({router:H,render:function(t){return t(k)}}).$mount("#app")},6418:function(t,e,a){},"8b6a":function(t,e,a){"use strict";var s=a("fd00"),n=a.n(s);n.a},ac16:function(t,e,a){},cc0e:function(t,e,a){"use strict";var s=a("ac16"),n=a.n(s);n.a},f0fc:function(t,e,a){t.exports=a.p+"img/icon.fb8179f3.png"},fd00:function(t,e,a){}});
//# sourceMappingURL=app.b311ebf0.js.map